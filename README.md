# RogueLike with JavaScript🔊🔊🔊

학습한 Javasciprt 문법을 최대한 활용하여 RogueLike 게임을 구현한 미니 개발프로젝트입니다.

---

## 💻개발 환경

-   Visual Studio Code, Git
-   **npm**
    1. **chalk** : console의 Log에 원하는 스타일링(color, bgcolor, underline 등)할 수 있는 기능 제공
    2. **figlet** : 원하는 text에 ASCII art로 변환해주는 기능 제공
    3. **readline-sync** : Node.js 환경에서 동기적으로 입력을 받을 수 있는 기능 제공

---

## 🎮게임 설명

-   총 스테이지는 10라운드로 진행되며, 만약 플레이 도중 플레이어가 사망한다면 1 스테이지로 강제 이동된다.
-   모든 스테이지를 클리어하면 게임 로비로 이동한다.
-   ※ 만약 글자가 깨진다면, `chcp 65001`를 입력하고 게임을 실행하면 된다.

### 🔋플레이어 능력치

1. **HP**
    - 기본 : 100
    - 성장 : + 20~50
2. **MP**
    - 기본 : 0 (최대 MP는 100으로 고정)
    - 성장 : + 0~damage (플레이어의 Damage 수치 중 일부를 마나로 흡수한다)
3. **공격력**
    - 플레이어의 최소 데미지를 의미
    - 기본 : 10
    - 성장 : + 5~10
4. **공격력 배율**
    - 플레이어 최대 데미지는 공격력 \* 공격력 배율로 정해진다.
    - 기본 : 1.0
    - 성장 : + 0.1~0.2
5. **도망가기 확률**
    - 일정 확률로 스테이지에서 도망칠 수 있다.
    - 기본 : 10%
    - 성장 : + 3~7 %
6. **연속공격 확률**
    - 일정 확률로 몬스터에게 연속(더블) 공격이 가능하다.
    - 기본 : 10%
    - 성장 : + 3~7 %
7. **방어하기 확률(기본 5%)**
    - 일정 확률로 해당 턴의 몬스터 공격의 60% Damage로 반격한다.
    - 기본 : 10%
    - 성장 : + 3~7 %

---

### ⚔ 전투 방식

-   플레이어 <-> 몬스터 간의 턴제 방식으로 전투.
-   플레이어는 일반 공격 / 연속 공격 / 방어하기 행동으로 준 데미지 중 일부 마나를 획득한다.
-   또, 스테이지 클리어 시, 다음 스테이지 시작과 동시에 일정 HP(50)를 회복한다.

1. **일반 공격**
    - 최소 데미지 ~ 최대 데미지로 몬스터에게 1번 공격한다.
2. **연속 공격**
    - 최소 데미지 ~ 최대 데미지로 몬스터에게 2번 공격한다.
3. **필살기**
    - Full Mp(100)일 때, 강력한 한방(최소 공격력의 10배 Damage)을 몬스터에게 입힌다.
    - 만약, 마나가 100미만인데 필살기를 사용할 경우, 플레이어는 힘이 풀려 주저앉으며 플레이어 턴이 그냥 넘어간다.
4. **방어하기**
    - 일정 확률로 방어하기에 성공 시, 몬스터의 Damage의 60%로 반격을 주고, 몬스터의 공격 턴을 무효화시킨다.
5. **도망가기**
    - 일정 확률로 도망가기에 성공 시, 해당 stage를 Clear한다.
6. **강제스킵**
    - 스테이지를 강제 스킵한다. 이 때, 플레이어는 레벨 업을 하지 못하고 다음 스테이지로 넘어간다.
    - 플레이어 사망 상황을 의도적으로 테스트하기 위해 추가하였다.

---

## 📌도전 구현 사항

1. **랜덤 로직 적용**
    - **Random.js** 내 `getRandomInt(), getRandomFloat()`는 Math.random()로 랜덤한 숫자를 반환한다.
    - 플레이어 성장 능력치에 랜덤 로직을 적용.
    - 플레이어 데미지는 (최소 데미지 ~ 최대 데미지) 중 랜덤으로 적용.
2. 확률 로직 적용

    - **Random.js** 내 `checkObbs()`로 랜덤 로직을 활용하여 0~100 중 랜덤한 숫자를 뽑고, 확률을 검사하는 로직 구현
    - 확률 로직을 플레이어 **연속 공격, 도망가기, 방어하기**에 적용

3. **복잡한 행동 패턴 구현**
    - 연속 공격 : 전투 방식 설명과 동일
    - 방어하기 : 전투 방식 설명과 동일

---

## 🧨추가 구현 사항

1. Player, Monster 뿐만 아니라 Stage도 Class화

    - OOP 개념을 도입하여 Stage도 클래스화하여 구현해보았다.

2. 플레이어 HP, MP 수치 **그래프 시각화** 기능 구현

    - hp, mp를 % 수치화하여 20등분한 그래프로 유저에게 보기 쉽게 시각화해주었다.

3. 스테이지 전투 후 클리어/패배/도망가기 성공 , 모든 스테이지 클리어(올클리어) 시, 상황에 맞는 **Display Animation** 기능 구현이 $\color{red}가장\ 어려웠다!!!$

    - 클리어/패배/올클리어 : `setTimeOut, promise, async/await`를 활용하여 구현
    - 도망가기 : `setInterval, setTimeOut, promise, async/await`를 활용하여 구현

    - 스테이지 클리어 시 바로 다음 클리어로 전환되는 게 너무 밋밋하게 느껴져 일정 시간동안 클리어 문구를 보여주고 싶었다.
    - figlet 패키지를 활용하여 ASCII art를 출력하고, Chalk 패키지를 활용하여 랜덤한 RGB 색상의 Text를 출력하게끔 하였다.
    - 이제 일정 시간을 멈추면서 출력해야 했기 때문에 setTimeOut와 Promise로 **stage.js** 내 `wait()`를 구현하고 필요한 부분에 `async, await` 기입하여 `animateClear()`를 구현
    - 추가로 기존의 `wait(timeDelay)`를 `waitDelay(func, timeDelay) / waitInterval(func, timeInterval, timeDelay)`로 세분화하였다.

        - `waitDelay(func, timeDelay)` : func를 호출하고, timeDelay만큼 기다린다.
        - `waitInterval(func, timeInterval, tiemDelay)` : timeInterval 시간마다 func를 호출하고, timeDelay 후 멈춘다.
        - ※ waitInterval은 setInterval 학습 목적으로 구현했으며, 테스트 용도로 `animateEscape()`에서 활용해보았다.

    - 이를 구현하면서 **async/await, new Promise의 동작 과정을 많이 이해하고 학습할 수 있었다!!!**

4. 필살기
    - 플레이어에게 강력한 한방을 주는 스킬을 만들어주고 싶었다.
    - 그래서, 플레이어에게 마나 속성을 부여해주고, 이 마나를 사용해서 필살기를 쓸 수 있게 기획하였다.
    - 마나는 플레이어가 몬스터에게 주는 Damage를 활용하여 (0~Damage) 중 Random한 수치를 마나로 흡수한다.
    - 마나의 상태가 Full MP(100)일 경우, 필살기를 사용하면 자신의 공격력의 10배에 달하는 Damage를 몬스터에게 주고, 마나는 초기화된다.
    - ※ 단, 마나가 100미만인데 필살기를 사용하는 경우, 플레이어는 털썩 주저앉아 망연자실하면서
      자신의 턴이 넘어간다.
